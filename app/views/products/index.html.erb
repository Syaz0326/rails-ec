<div class="container">
  <h1>商品一覧</h1>

  <%= form_with(url: items_path, method: :get, class: 'sort') do |f| %>
    <%= f.label '並び替え' %>
    <% if @sort_by.present? %>
      <%= f.select :sort_by, @sort_items, { selected: @sort_by }, onChange: "javascript: this.form.submit();"  %>
    <% else %>
      <%= f.select :sort_by, @sort_items, {}, onChange: "javascript: this.form.submit();"  %>
    <% end %>
  <% end %>

  <div class="list-group">
    <% @items.each do |item| %>
      <%= link_to  item_path(item), class: 'list-group-item list-group-item-action' do %>
        <h2>
          <%= item.name %>,
        </h2>
        <ul>
          <li>商品id: <%= item.id %></li>
          <li>説明文: <%= item.description %></li>
          <li>メーカー: <%= item.maker.name %></li>
          <li>レビュー数: <%= item.review.length %></li>
          <li>評価: <%= total_score_formatted(item.review) %></li>
        </ul>
        
      <% end %>
    <% end %>
  </div>
</div>
